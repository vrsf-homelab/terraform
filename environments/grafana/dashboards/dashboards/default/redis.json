{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"\n\nIf you missing redis memory utilization, please modify \"maxmemory\" value in values.yaml","editable":true,"fiscalYearStartMonth":0,"gnetId":11835,"graphTooltip":0,"id":22,"links":[],"panels":[{"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":18,"title":"General","type":"row"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":1},"id":9,"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"11.0.0","targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"max_over_time(redis_uptime_in_seconds{instance=~\"$instance\"}[$__interval])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{pod}}","metric":"","range":true,"refId":"A","step":1800}],"title":"Uptime","type":"stat"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":1},"hideTimeOverride":true,"id":12,"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"11.0.0","targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"redis_connected_clients{instance=~\"$instance\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}","metric":"","range":true,"refId":"A","step":2}],"timeFrom":"1m","title":"Clients","type":"stat"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":70,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":8},"id":5,"options":{"legend":{"calcs":["lastNotNull"],"displayMode":"table","placement":"right","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"sum (redis_db_keys) by (db)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ db }} ","range":true,"refId":"A","step":240,"target":""}],"title":"Total Items per DB","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"rgba(245, 54, 54, 0.9)","value":95}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":8},"hideTimeOverride":true,"id":11,"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"11.0.0","targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"100 * (redis_memory_used_bytes{instance=~\"$instance\"}  / redis_memory_max_bytes{instance=~\"$instance\"} )","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}","metric":"","range":true,"refId":"A","step":2}],"timeFrom":"1m","title":"Memory Usage","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":15},"id":17,"panels":[],"repeat":"pod_name","repeatDirection":"h","title":"$pod_name","type":"row"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"max"},"properties":[{"id":"color","value":{"fixedColor":"#BF1B00","mode":"fixed"}}]}]},"gridPos":{"h":7,"w":12,"x":0,"y":16},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"redis_memory_used_bytes{instance=~\"$instance\"} ","format":"time_series","intervalFactor":2,"legendFormat":"used","metric":"","range":true,"refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"redis_memory_max_bytes{instance=~\"$instance\"} ","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"max","range":true,"refId":"B","step":240}],"title":"Total Memory Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":16},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"rate(redis_commands_processed_total{instance=~\"$instance\"}[1m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{pod}}","metric":"A","range":true,"refId":"A","step":240,"target":""}],"title":"Commands Executed / sec","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":80,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":23},"id":14,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"expr":"topk(5, irate(redis_commands_total{instance=~\"$instance\"} [1m]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{ cmd }}","metric":"redis_command_calls_total","refId":"A","step":240}],"title":"Command Calls / sec","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":23},"id":1,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"irate(redis_keyspace_hits_total{instance=~\"$instance\"}[5m])","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"hits","metric":"","range":true,"refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"irate(redis_keyspace_misses_total{instance=~\"$instance\"}[5m])","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"misses","metric":"","range":true,"refId":"B","step":240,"target":""}],"title":"Hits / Misses per Sec","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[{"matcher":{"id":"byName","options":"evicts"},"properties":[{"id":"color","value":{"fixedColor":"#890F02","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"memcached_items_evicted_total{instance=\"172.17.0.1:9150\",job=\"prometheus\"}"},"properties":[{"id":"color","value":{"fixedColor":"#890F02","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"reclaims"},"properties":[{"id":"color","value":{"fixedColor":"#3F6833","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"reclaims"},"properties":[{"id":"custom.axisPlacement","value":"right"}]}]},"gridPos":{"h":7,"w":12,"x":0,"y":30},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"expr":"sum(rate(redis_expired_keys_total{instance=~\"$instance\"}[5m])) by (instance)","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"expired","metric":"","refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"expr":"sum(rate(redis_evicted_keys_total{instance=~\"$instance\"}[5m])) by (instance)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"evicted","refId":"B","step":240}],"title":"Expired / Evicted","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":70,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":30},"id":13,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"expr":"sum (redis_db_keys{instance=~\"$instance\"}) - sum (redis_db_keys_expiring{instance=~\"$instance\"}) ","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"not expiring","refId":"A","step":240,"target":""},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"expr":"sum (redis_db_keys_expiring{instance=~\"$instance\"}) ","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"expiring","metric":"","refId":"B","step":240}],"title":"Expiring vs Not-Expiring Keys","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":37},"id":16,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"expr":"redis_connected_clients{instance=\"$instance\"}","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Redis connected clients","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":37},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"maxHeight":600,"mode":"multi","sort":"none"}},"targets":[{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"rate(redis_net_input_bytes_total{instance=~\"$instance\"}[5m])","format":"time_series","intervalFactor":2,"legendFormat":"input","range":true,"refId":"A","step":240},{"datasource":{"type":"prometheus","uid":"PA37D07FE30048D3A"},"editorMode":"code","expr":"rate(redis_net_output_bytes_total{instance=~\"$instance\"}[5m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"output","range":true,"refId":"B","step":240}],"title":"Network I/O","type":"timeseries"}],"refresh":"","schemaVersion":39,"tags":["redis"],"templating":{"list":[{"current":{"selected":false,"text":"Kubernetes","value":"PA37D07FE30048D3A"},"hide":0,"includeAll":false,"label":"Prometheus","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{"selected":false,"text":"redis","value":"redis"},"datasource":{"uid":"$DS_PROMETHEUS"},"definition":"label_values(redis_up, namespace)","hide":0,"includeAll":false,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":"label_values(redis_up, namespace)","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"$DS_PROMETHEUS"},"definition":"label_values(redis_up{namespace=\"$namespace\"}, pod)","hide":0,"includeAll":true,"label":"Pod Name","multi":true,"name":"pod_name","options":[],"query":"label_values(redis_up{namespace=\"$namespace\"}, pod)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"$DS_PROMETHEUS"},"definition":"label_values(redis_up{namespace=\"$namespace\", pod=~\"$pod_name\"},instance)","hide":0,"includeAll":true,"multi":true,"name":"instance","options":[],"query":{"qryType":1,"query":"label_values(redis_up{namespace=\"$namespace\", pod=~\"$pod_name\"},instance)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-12h","to":"now"},"timeRangeUpdatedDuringEditOrView":false,"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Redis","uid":"xDLNRKUWz","version":7,"weekStart":""}
